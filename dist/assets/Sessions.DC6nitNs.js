import{r as e,f as s,j as r}from"./vendor.BYKJsIdm.js";import{L as t,c as a}from"./index.IlIzE3wi.js";const c=()=>{const[c,l]=e.useState({key:"color",direction:"asc",date:null}),{data:n,isLoading:o}=s({queryKey:["climbs"],queryFn:async()=>(await a.get("/climbs")).data});if(o)return r.jsx(t,{});const i=n?.reduce(((e,s)=>{const r=new Date(s.createdAt).toLocaleDateString();return e[r]||(e[r]=[]),e[r].push(s),e}),{})||{},d=(e,s)=>{l((r=>({key:e,direction:r.key===e&&r.date===s&&"asc"===r.direction?"desc":"asc",date:s})))},x=(e,s)=>c.key!==e||c.date!==s?null:r.jsx("span",{className:"ml-1",children:"asc"===c.direction?"↑":"↓"});return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Your Climbing Sessions"}),Object.entries(i).map((([e,s])=>{return r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:e}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50",children:[r.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("color",e),children:["Color ",x("color",e)]}),r.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("grade",e),children:["Grade ",x("grade",e)]}),r.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("status",e),children:["Status ",x("status",e)]}),r.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("tries",e),children:["# Tries ",x("tries",e)]}),r.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("rating",e),children:["Stars ",x("rating",e)]}),r.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("points",e),children:["Points ",x("points",e)]})]})}),r.jsx("tbody",{children:(t=s,[...t].sort(((e,s)=>{let r=0;switch(c.key){case"color":r=e.route.color.localeCompare(s.route.color);break;case"grade":r=e.route.grade.localeCompare(s.route.grade);break;case"status":r=Number(s.status)-Number(e.status);break;case"tries":r=e.tries-s.tries;break;case"rating":r=e.rating-s.rating;break;case"points":r=e.points-s.points;break;default:return 0}return"asc"===c.direction?r:-r}))).map((e=>{return r.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-2",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:(s=e.route.color,{White:"#FFFFFF",Pink:"#FF69B4",Blue:"#0000FF",Black:"#000000",Orange:"#FFA500",Purple:"#800080",Green:"#008000",Red:"#FF0000",Yellow:"#FFFF00",Teal:"#008080"}[s]||"#CCCCCC"),border:"White"===e.route.color?"1px solid #ccc":"none"}}),e.route.color]})}),r.jsx("td",{className:"px-4 py-2",children:e.route.grade}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("span",{className:"font-medium "+(e.status?"text-green-600":"text-red-600"),children:e.status?"Send":"Attempt"})}),r.jsx("td",{className:"px-4 py-2",children:e.tries}),r.jsxs("td",{className:"px-4 py-2",children:[e.rating,"/5"]}),r.jsx("td",{className:"px-4 py-2",children:r.jsxs("span",{className:"text-purple-600 font-medium",children:[e.points," pts"]})})]},e.id);var s}))})]})})]},e);var t})),0===Object.keys(i).length&&r.jsxs("div",{className:"text-center my-8",children:[r.jsx("h4",{className:"text-xl text-gray-600 mb-4",children:"Enter your first climb to see Sessions"}),r.jsx("a",{href:"/sends",className:"inline-block bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition",children:"Back to Sends"})]})]})};export{c as default};
