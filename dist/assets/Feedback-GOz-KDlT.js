import{r as l,f as b,h as x,j as e}from"./vendor-D1-M7YfK.js";import{c as o}from"./main-BxwRSgSc.js";const f=["Bug Report","Feature Request","User Experience","Performance Issue","Other"],g=()=>{const[c,i]=l.useState("new"),[t,r]=l.useState({title:"",description:"",category:""}),{data:d,refetch:m}=b({queryKey:["feedback",c],queryFn:async()=>(await o.get(`/api/feedback?sort=${c}`)).data}),n=x({mutationFn:async s=>await o.post("/api/feedback",s,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:()=>{r({title:"",description:"",category:""}),m()}}),u=async s=>{s.preventDefault();const a=new FormData;a.append("title",t.title),a.append("description",t.description),a.append("category",t.category),t.screenshot&&a.append("screenshot",t.screenshot),n.mutate(a)},p=s=>{const a=s.target.files?.[0];a&&r(h=>({...h,screenshot:a}))};return e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-md-4 mb-4",children:e.jsx("div",{className:"card bg-dark",children:e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:u,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label required-field",children:"Title"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Short, descriptive title",required:!0,value:t.title,onChange:s=>r(a=>({...a,title:s.target.value}))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label required-field",children:"Description"}),e.jsx("textarea",{className:"form-control",placeholder:"Detailed description of your feedback",required:!0,value:t.description,onChange:s=>r(a=>({...a,description:s.target.value}))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label required-field",children:"Category"}),e.jsxs("select",{className:"form-select",required:!0,value:t.category,onChange:s=>r(a=>({...a,category:s.target.value})),children:[e.jsx("option",{value:"",children:"Select a category"}),f.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Screenshot"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:p})]}),e.jsx("button",{type:"submit",className:"btn bg-solo-purple text-white w-100",disabled:n.isPending,children:n.isPending?"Submitting...":"Submit"})]})})})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"card bg-dark",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title mb-0",children:"Community Feedback"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"btn-group mb-3 w-100",children:[e.jsx("button",{className:`btn btn-outline-secondary ${c==="new"?"active":""}`,onClick:()=>i("new"),children:"Latest"}),e.jsx("button",{className:`btn btn-outline-secondary ${c==="top"?"active":""}`,onClick:()=>i("top"),children:"Top"})]}),d?.map(s=>e.jsxs("div",{className:"feedback-item mb-3",children:[e.jsx("h6",{children:s.title}),e.jsx("p",{className:"mb-1",children:s.description}),e.jsxs("small",{className:"text-muted",children:["By @",s.user.username," on ",new Date(s.created_at).toLocaleDateString()]})]},s.id))]})]})})]})};export{g as default};
