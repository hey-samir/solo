import{j as e,L as v,c as i}from"./main-CXPaLQ_r.js";import{r as w}from"./vendor-react-Bxu8IAQH.js";import{u as y}from"./useQuery-BXaTn2AS.js";import{u as S}from"./useMutation-DLpzL439.js";const k={White:"#FFFFFF",Pink:"#FF69B4",Blue:"#0000FF",Black:"#000000",Orange:"#FFA500",Purple:"#800080",Green:"#008000",Red:"#FF0000",Yellow:"#FFFF00",Teal:"#008080"},G=()=>{const[a,l]=w.useState({route_id:0,tries:1,status:!0,rating:3,notes:""}),{data:r,isLoading:o}=y({queryKey:["routes"],queryFn:async()=>(await i.get("/routes")).data}),c=S({mutationFn:async s=>await i.post("/climbs",s),onSuccess:()=>{l({route_id:0,tries:1,status:!0,rating:3,notes:""})}}),d=(s,t,u,x)=>{if(!s)return 0;const[M,h,j]=s.match(/5\.(\d+)([a-d])?/)||[null,"0",""],b={5:50,6:60,7:70,8:80,9:100,10:150,11:200,12:300,13:400,14:500,15:600},p={a:1,b:1.1,c:1.2,d:1.3},f=(b[h]||0)*(p[j]||1),N=Math.max(.1,t/3),g=u?1:.5,F=Math.max(.1,1/Math.sqrt(x));return Math.round(f*N*g*F)};if(o)return e.jsx(v,{});const n=r==null?void 0:r.find(s=>s.id===a.route_id),m=n?d(n.grade,a.rating,a.status,a.tries):0;return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body p-0",children:e.jsxs("form",{onSubmit:s=>{s.preventDefault(),c.mutate(a)},className:"w-100",children:[e.jsx("table",{className:"table table-form w-100",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"form-label-cell",children:e.jsx("label",{className:"form-label required-field",children:"Route"})}),e.jsx("td",{className:"form-input-cell",children:e.jsxs("select",{className:"form-select form-select-lg custom-select",value:a.route_id||"",onChange:s=>l(t=>({...t,route_id:Number(s.target.value)})),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a route"}),r==null?void 0:r.map(s=>e.jsxs("option",{value:s.id,className:"route-option",children:[e.jsx("span",{className:"color-dot",style:{backgroundColor:k[s.color]||"#FFFFFF"}}),s.wall_sector," - ",s.anchor_number," - ",s.color," ",s.grade]},s.id))]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"form-label-cell",children:e.jsx("label",{className:"form-label required-field",children:"Tries"})}),e.jsx("td",{className:"form-input-cell",children:e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("input",{type:"range",min:"1",max:"10",value:a.tries,onChange:s=>l(t=>({...t,tries:Number(s.target.value)})),className:"form-range"}),e.jsx("span",{className:"text-white",children:a.tries})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"form-label-cell",children:e.jsx("label",{className:"form-label required-field",children:"Status"})}),e.jsx("td",{className:"form-input-cell",children:e.jsxs("div",{className:"form-check form-switch",children:[e.jsx("input",{className:"form-check-input custom-switch",type:"checkbox",role:"switch",checked:a.status,onChange:s=>l(t=>({...t,status:s.target.checked}))}),e.jsx("label",{className:"form-check-label",children:a.status?"Sent":"Attempted"})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"form-label-cell",children:e.jsx("label",{className:"form-label required-field",children:"Stars"})}),e.jsx("td",{className:"form-input-cell",children:e.jsx("div",{className:"rating-container",children:e.jsx("div",{className:"rating",children:[1,2,3,4,5].map(s=>e.jsx("i",{className:`rating-star bi bi-star-fill ${s<=a.rating?"active":""}`,onClick:()=>l(t=>({...t,rating:s}))},s))})})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"form-label-cell",children:e.jsx("label",{className:"form-label",children:"Notes"})}),e.jsx("td",{className:"form-input-cell",children:e.jsx("textarea",{className:"form-control form-control-lg",rows:3,value:a.notes,onChange:s=>l(t=>({...t,notes:s.target.value}))})})]})]})}),e.jsxs("div",{className:"px-3 pb-3 w-100",children:[e.jsx("button",{type:"submit",className:"btn btn-primary btn-lg w-100",disabled:c.isPending,children:c.isPending?"Sending...":a.status?"Send":"Log"}),e.jsxs("div",{className:"text-white mt-3 text-center fs-6",children:["Points: ",m]})]})]})})})})};export{G as default};
