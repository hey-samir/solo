import{r as e,f as s,h as a,j as l}from"./vendor.BYKJsIdm.js";import{L as t,c as r}from"./index.IlIzE3wi.js";const c={White:"#FFFFFF",Pink:"#FF69B4",Blue:"#0000FF",Black:"#000000",Orange:"#FFA500",Purple:"#800080",Green:"#008000",Red:"#FF0000",Yellow:"#FFFF00",Teal:"#008080"},i=()=>{const[i,n]=e.useState({route_id:0,tries:1,status:!0,rating:3,notes:""}),{data:d,isLoading:o}=s({queryKey:["routes"],queryFn:async()=>(await r.get("/routes")).data}),m=a({mutationFn:async e=>await r.post("/climbs",e),onSuccess:()=>{n({route_id:0,tries:1,status:!0,rating:3,notes:""})}});if(o)return l.jsx(t,{});const u=d?.find((e=>e.id===i.route_id)),h=u?((e,s,a,l)=>{if(!e)return 0;const[t,r,c]=e.match(/5\.(\d+)([a-d])?/)||[null,"0",""],i=({5:50,6:60,7:70,8:80,9:100,10:150,11:200,12:300,13:400,14:500,15:600}[r]||0)*({a:1,b:1.1,c:1.2,d:1.3}[c]||1),n=Math.max(.1,s/3),d=a?1:.5,o=Math.max(.1,1/Math.sqrt(l));return Math.round(i*n*d*o)})(u.grade,i.rating,i.status,i.tries):0;return l.jsx("div",{className:"container mx-auto px-4 py-8",children:l.jsx("div",{className:"card",children:l.jsx("div",{className:"card-body p-0",children:l.jsxs("form",{onSubmit:e=>{e.preventDefault(),m.mutate(i)},className:"w-100",children:[l.jsx("table",{className:"table table-form w-100",children:l.jsxs("tbody",{children:[l.jsxs("tr",{children:[l.jsx("td",{className:"form-label-cell",children:l.jsx("label",{className:"form-label required-field",children:"Route"})}),l.jsx("td",{className:"form-input-cell",children:l.jsxs("select",{className:"form-select form-select-lg custom-select",value:i.route_id||"",onChange:e=>n((s=>({...s,route_id:Number(e.target.value)}))),required:!0,children:[l.jsx("option",{value:"",disabled:!0,children:"Select a route"}),d?.map((e=>l.jsxs("option",{value:e.id,className:"route-option",children:[l.jsx("span",{className:"color-dot",style:{backgroundColor:c[e.color]||"#FFFFFF"}}),e.wall_sector," - ",e.anchor_number," - ",e.color," ",e.grade]},e.id)))]})})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"form-label-cell",children:l.jsx("label",{className:"form-label required-field",children:"Tries"})}),l.jsx("td",{className:"form-input-cell",children:l.jsxs("div",{className:"d-flex align-items-center gap-3",children:[l.jsx("input",{type:"range",min:"1",max:"10",value:i.tries,onChange:e=>n((s=>({...s,tries:Number(e.target.value)}))),className:"form-range"}),l.jsx("span",{className:"text-white",children:i.tries})]})})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"form-label-cell",children:l.jsx("label",{className:"form-label required-field",children:"Status"})}),l.jsx("td",{className:"form-input-cell",children:l.jsxs("div",{className:"form-check form-switch",children:[l.jsx("input",{className:"form-check-input custom-switch",type:"checkbox",role:"switch",checked:i.status,onChange:e=>n((s=>({...s,status:e.target.checked})))}),l.jsx("label",{className:"form-check-label",children:i.status?"Sent":"Attempted"})]})})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"form-label-cell",children:l.jsx("label",{className:"form-label required-field",children:"Stars"})}),l.jsx("td",{className:"form-input-cell",children:l.jsx("div",{className:"rating-container",children:l.jsx("div",{className:"rating",children:[1,2,3,4,5].map((e=>l.jsx("i",{className:"rating-star bi bi-star-fill "+(e<=i.rating?"active":""),onClick:()=>n((s=>({...s,rating:e})))},e)))})})})]}),l.jsxs("tr",{children:[l.jsx("td",{className:"form-label-cell",children:l.jsx("label",{className:"form-label",children:"Notes"})}),l.jsx("td",{className:"form-input-cell",children:l.jsx("textarea",{className:"form-control form-control-lg",rows:3,value:i.notes,onChange:e=>n((s=>({...s,notes:e.target.value})))})})]})]})}),l.jsxs("div",{className:"px-3 pb-3 w-100",children:[l.jsx("button",{type:"submit",className:"btn btn-primary btn-lg w-100",disabled:m.isPending,children:m.isPending?"Sending...":i.status?"Send":"Log"}),l.jsxs("div",{className:"text-white mt-3 text-center fs-6",children:["Points: ",h]})]})]})})})})};export{i as default};
