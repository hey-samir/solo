import{u as e,b as s,j as a}from"./vendor-utils-DZ_i5Fqp.js";import{r as l}from"./vendor-react-DhU2FqAC.js";import{L as t,c as r}from"./index-tO6MLGXG.js";const c={White:"#FFFFFF",Pink:"#FF69B4",Blue:"#0000FF",Black:"#000000",Orange:"#FFA500",Purple:"#800080",Green:"#008000",Red:"#FF0000",Yellow:"#FFFF00",Teal:"#008080"},i=()=>{const[i,n]=l.useState({route_id:0,tries:1,status:!0,rating:3,notes:""}),{data:d,isLoading:o}=e({queryKey:["routes"],queryFn:async()=>(await r.get("/routes")).data}),m=s({mutationFn:async e=>await r.post("/climbs",e),onSuccess:()=>{n({route_id:0,tries:1,status:!0,rating:3,notes:""})}});if(o)return a.jsx(t,{});const u=null==d?void 0:d.find((e=>e.id===i.route_id)),h=u?((e,s,a,l)=>{if(!e)return 0;const[t,r,c]=e.match(/5\.(\d+)([a-d])?/)||[null,"0",""],i=({5:50,6:60,7:70,8:80,9:100,10:150,11:200,12:300,13:400,14:500,15:600}[r]||0)*({a:1,b:1.1,c:1.2,d:1.3}[c]||1),n=Math.max(.1,s/3),d=a?1:.5,o=Math.max(.1,1/Math.sqrt(l));return Math.round(i*n*d*o)})(u.grade,i.rating,i.status,i.tries):0;return a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body p-0",children:a.jsxs("form",{onSubmit:e=>{e.preventDefault(),m.mutate(i)},className:"w-100",children:[a.jsx("table",{className:"table table-form w-100",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{className:"form-label-cell",children:a.jsx("label",{className:"form-label required-field",children:"Route"})}),a.jsx("td",{className:"form-input-cell",children:a.jsxs("select",{className:"form-select form-select-lg custom-select",value:i.route_id||"",onChange:e=>n((s=>({...s,route_id:Number(e.target.value)}))),required:!0,children:[a.jsx("option",{value:"",disabled:!0,children:"Select a route"}),null==d?void 0:d.map((e=>a.jsxs("option",{value:e.id,className:"route-option",children:[a.jsx("span",{className:"color-dot",style:{backgroundColor:c[e.color]||"#FFFFFF"}}),e.wall_sector," - ",e.anchor_number," - ",e.color," ",e.grade]},e.id)))]})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"form-label-cell",children:a.jsx("label",{className:"form-label required-field",children:"Tries"})}),a.jsx("td",{className:"form-input-cell",children:a.jsxs("div",{className:"d-flex align-items-center gap-3",children:[a.jsx("input",{type:"range",min:"1",max:"10",value:i.tries,onChange:e=>n((s=>({...s,tries:Number(e.target.value)}))),className:"form-range"}),a.jsx("span",{className:"text-white",children:i.tries})]})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"form-label-cell",children:a.jsx("label",{className:"form-label required-field",children:"Status"})}),a.jsx("td",{className:"form-input-cell",children:a.jsxs("div",{className:"form-check form-switch",children:[a.jsx("input",{className:"form-check-input custom-switch",type:"checkbox",role:"switch",checked:i.status,onChange:e=>n((s=>({...s,status:e.target.checked})))}),a.jsx("label",{className:"form-check-label",children:i.status?"Sent":"Attempted"})]})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"form-label-cell",children:a.jsx("label",{className:"form-label required-field",children:"Stars"})}),a.jsx("td",{className:"form-input-cell",children:a.jsx("div",{className:"rating-container",children:a.jsx("div",{className:"rating",children:[1,2,3,4,5].map((e=>a.jsx("i",{className:"rating-star bi bi-star-fill "+(e<=i.rating?"active":""),onClick:()=>n((s=>({...s,rating:e})))},e)))})})})]}),a.jsxs("tr",{children:[a.jsx("td",{className:"form-label-cell",children:a.jsx("label",{className:"form-label",children:"Notes"})}),a.jsx("td",{className:"form-input-cell",children:a.jsx("textarea",{className:"form-control form-control-lg",rows:3,value:i.notes,onChange:e=>n((s=>({...s,notes:e.target.value})))})})]})]})}),a.jsxs("div",{className:"px-3 pb-3 w-100",children:[a.jsx("button",{type:"submit",className:"btn btn-primary btn-lg w-100",disabled:m.isPending,children:m.isPending?"Sending...":i.status?"Send":"Log"}),a.jsxs("div",{className:"text-white mt-3 text-center fs-6",children:["Points: ",h]})]})]})})})})};export{i as default};
//# sourceMappingURL=Sends-BcSKjCsd.js.map
