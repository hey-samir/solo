var me=t=>{throw TypeError(t)};var se=(t,e,s)=>e.has(t)||me("Cannot "+s);var i=(t,e,s)=>(se(t,e,"read from private field"),s?s.call(t):e.get(t)),p=(t,e,s)=>e.has(t)?me("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),o=(t,e,s,n)=>(se(t,e,"write to private field"),n?n.call(t,s):e.set(t,s),s),y=(t,e,s)=>(se(t,e,"access private method"),s);import{b as w}from"./vendor-DaUdUtt_.js";import"./main-Boez7aCd.js";var de=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},$=typeof window>"u"||"Deno"in globalThis;function Me(){}function ve(t){return typeof t=="number"&&t>=0&&t!==1/0}function De(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Z(t,e){return typeof t=="function"?t(e):t}function F(t,e){return typeof t=="function"?t(e):t}function lt(t){return JSON.stringify(t,(e,s)=>ne(s)?Object.keys(s).sort().reduce((n,r)=>(n[r]=s[r],n),{}):s)}function je(t,e){if(t===e)return t;const s=Re(t)&&Re(e);if(s||ne(t)&&ne(e)){const n=s?t:Object.keys(t),r=n.length,c=s?e:Object.keys(e),h=c.length,a=s?[]:{};let f=0;for(let g=0;g<h;g++){const b=s?g:c[g];(!s&&n.includes(b)||s)&&t[b]===void 0&&e[b]===void 0?(a[b]=void 0,f++):(a[b]=je(t[b],e[b]),a[b]===t[b]&&t[b]!==void 0&&f++)}return r===h&&f===r?t:a}return e}function ie(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t)if(t[s]!==e[s])return!1;return!0}function Re(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ne(t){if(!Oe(t))return!1;const e=t.constructor;if(e===void 0)return!0;const s=e.prototype;return!(!Oe(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Oe(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ce(t,e,s){return typeof s.structuralSharing=="function"?s.structuralSharing(t,e):s.structuralSharing!==!1?je(t,e):e}var j,x,k,Ie,ke=(Ie=class extends de{constructor(){super();p(this,j);p(this,x);p(this,k);o(this,k,e=>{if(!$&&window.addEventListener){const s=()=>e();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){i(this,x)||this.setEventListener(i(this,k))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,x))==null||e.call(this),o(this,x,void 0))}setEventListener(e){var s;o(this,k,e),(s=i(this,x))==null||s.call(this),o(this,x,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){i(this,j)!==e&&(o(this,j,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(s=>{s(e)})}isFocused(){var e;return typeof i(this,j)=="boolean"?i(this,j):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},j=new WeakMap,x=new WeakMap,k=new WeakMap,Ie),_e=new ke,_,I,A,Qe,Ae=(Qe=class extends de{constructor(){super();p(this,_,!0);p(this,I);p(this,A);o(this,A,e=>{if(!$&&window.addEventListener){const s=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",n)}}})}onSubscribe(){i(this,I)||this.setEventListener(i(this,A))}onUnsubscribe(){var e;this.hasListeners()||((e=i(this,I))==null||e.call(this),o(this,I,void 0))}setEventListener(e){var s;o(this,A,e),(s=i(this,I))==null||s.call(this),o(this,I,e(this.setOnline.bind(this)))}setOnline(e){i(this,_)!==e&&(o(this,_,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return i(this,_)}},_=new WeakMap,I=new WeakMap,A=new WeakMap,Qe),Ne=new Ae;function we(){let t,e;const s=new Promise((r,c)=>{t=r,e=c});s.status="pending",s.catch(()=>{});function n(r){Object.assign(s,r),delete s.resolve,delete s.reject}return s.resolve=r=>{n({status:"fulfilled",value:r}),t(r)},s.reject=r=>{n({status:"rejected",reason:r}),e(r)},s}function Be(t){return(t??"online")==="online"?Ne.isOnline():!0}function ze(){let t=[],e=0,s=a=>{a()},n=a=>{a()},r=a=>setTimeout(a,0);const c=a=>{e?t.push(a):r(()=>{s(a)})},h=()=>{const a=t;t=[],a.length&&r(()=>{n(()=>{a.forEach(f=>{s(f)})})})};return{batch:a=>{let f;e++;try{f=a()}finally{e--,e||h()}return f},batchCalls:a=>(...f)=>{c(()=>{a(...f)})},schedule:c,setNotifyFunction:a=>{s=a},setBatchNotifyFunction:a=>{n=a},setScheduler:a=>{r=a}}}var Te=ze();function He(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Be(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}var O,u,G,R,T,N,Q,E,X,B,z,P,U,L,H,l,J,re,ae,oe,ue,he,ce,le,Pe,Le,qe=(Le=class extends de{constructor(e,s){super();p(this,l);p(this,O);p(this,u);p(this,G);p(this,R);p(this,T);p(this,N);p(this,Q);p(this,E);p(this,X);p(this,B);p(this,z);p(this,P);p(this,U);p(this,L);p(this,H,new Set);this.options=s,o(this,O,e),o(this,E,null),o(this,Q,we()),this.options.experimental_prefetchInRender||i(this,Q).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,u).addObserver(this),Se(i(this,u),this.options)?y(this,l,J).call(this):this.updateResult(),y(this,l,ue).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return fe(i(this,u),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return fe(i(this,u),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,y(this,l,he).call(this),y(this,l,ce).call(this),i(this,u).removeObserver(this)}setOptions(e,s){const n=this.options,r=i(this,u);if(this.options=i(this,O).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof F(this.options.enabled,i(this,u))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");y(this,l,le).call(this),i(this,u).setOptions(this.options),n._defaulted&&!ie(this.options,n)&&i(this,O).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,u),observer:this});const c=this.hasListeners();c&&Ee(i(this,u),r,this.options,n)&&y(this,l,J).call(this),this.updateResult(s),c&&(i(this,u)!==r||F(this.options.enabled,i(this,u))!==F(n.enabled,i(this,u))||Z(this.options.staleTime,i(this,u))!==Z(n.staleTime,i(this,u)))&&y(this,l,re).call(this);const h=y(this,l,ae).call(this);c&&(i(this,u)!==r||F(this.options.enabled,i(this,u))!==F(n.enabled,i(this,u))||h!==i(this,L))&&y(this,l,oe).call(this,h)}getOptimisticResult(e){const s=i(this,O).getQueryCache().build(i(this,O),e),n=this.createResult(s,e);return We(this,n)&&(o(this,R,n),o(this,N,this.options),o(this,T,i(this,u).state)),n}getCurrentResult(){return i(this,R)}trackResult(e,s){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),s==null||s(r),e[r])})}),n}trackProp(e){i(this,H).add(e)}getCurrentQuery(){return i(this,u)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=i(this,O).defaultQueryOptions(e),n=i(this,O).getQueryCache().build(i(this,O),s);return n.fetch().then(()=>this.createResult(n,s))}fetch(e){return y(this,l,J).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,R)))}createResult(e,s){var ge;const n=i(this,u),r=this.options,c=i(this,R),h=i(this,T),a=i(this,N),g=e!==n?e.state:i(this,G),{state:b}=e;let d={...b},q=!1,m;if(s._optimisticResults){const v=this.hasListeners(),M=!v&&Se(e,s),D=v&&Ee(e,n,s,r);(M||D)&&(d={...d,...He(b.data,e.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:V,errorUpdatedAt:W,status:C}=d;if(s.select&&d.data!==void 0)if(c&&d.data===(h==null?void 0:h.data)&&s.select===i(this,X))m=i(this,B);else try{o(this,X,s.select),m=s.select(d.data),m=Ce(c==null?void 0:c.data,m,s),o(this,B,m),o(this,E,null)}catch(v){o(this,E,v)}else m=d.data;if(s.placeholderData!==void 0&&m===void 0&&C==="pending"){let v;if(c!=null&&c.isPlaceholderData&&s.placeholderData===(a==null?void 0:a.placeholderData))v=c.data;else if(v=typeof s.placeholderData=="function"?s.placeholderData((ge=i(this,z))==null?void 0:ge.state.data,i(this,z)):s.placeholderData,s.select&&v!==void 0)try{v=s.select(v),o(this,E,null)}catch(M){o(this,E,M)}v!==void 0&&(C="success",m=Ce(c==null?void 0:c.data,v,s),q=!0)}i(this,E)&&(V=i(this,E),m=i(this,B),W=Date.now(),C="error");const K=d.fetchStatus==="fetching",ee=C==="pending",te=C==="error",be=ee&&K,ye=m!==void 0,S={status:C,fetchStatus:d.fetchStatus,isPending:ee,isSuccess:C==="success",isError:te,isInitialLoading:be,isLoading:be,data:m,dataUpdatedAt:d.dataUpdatedAt,error:V,errorUpdatedAt:W,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>g.dataUpdateCount||d.errorUpdateCount>g.errorUpdateCount,isFetching:K,isRefetching:K&&!ee,isLoadingError:te&&!ye,isPaused:d.fetchStatus==="paused",isPlaceholderData:q,isRefetchError:te&&ye,isStale:pe(e,s),refetch:this.refetch,promise:i(this,Q)};if(this.options.experimental_prefetchInRender){const v=Y=>{S.status==="error"?Y.reject(S.error):S.data!==void 0&&Y.resolve(S.data)},M=()=>{const Y=o(this,Q,S.promise=we());v(Y)},D=i(this,Q);switch(D.status){case"pending":e.queryHash===n.queryHash&&v(D);break;case"fulfilled":(S.status==="error"||S.data!==D.value)&&M();break;case"rejected":(S.status!=="error"||S.error!==D.reason)&&M();break}}return S}updateResult(e){const s=i(this,R),n=this.createResult(i(this,u),this.options);if(o(this,T,i(this,u).state),o(this,N,this.options),i(this,T).data!==void 0&&o(this,z,i(this,u)),ie(n,s))return;o(this,R,n);const r={},c=()=>{if(!s)return!0;const{notifyOnChangeProps:h}=this.options,a=typeof h=="function"?h():h;if(a==="all"||!a&&!i(this,H).size)return!0;const f=new Set(a??i(this,H));return this.options.throwOnError&&f.add("error"),Object.keys(i(this,R)).some(g=>{const b=g;return i(this,R)[b]!==s[b]&&f.has(b)})};(e==null?void 0:e.listeners)!==!1&&c()&&(r.listeners=!0),y(this,l,Pe).call(this,{...r,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&y(this,l,ue).call(this)}},O=new WeakMap,u=new WeakMap,G=new WeakMap,R=new WeakMap,T=new WeakMap,N=new WeakMap,Q=new WeakMap,E=new WeakMap,X=new WeakMap,B=new WeakMap,z=new WeakMap,P=new WeakMap,U=new WeakMap,L=new WeakMap,H=new WeakMap,l=new WeakSet,J=function(e){y(this,l,le).call(this);let s=i(this,u).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(Me)),s},re=function(){y(this,l,he).call(this);const e=Z(this.options.staleTime,i(this,u));if($||i(this,R).isStale||!ve(e))return;const n=De(i(this,R).dataUpdatedAt,e)+1;o(this,P,setTimeout(()=>{i(this,R).isStale||this.updateResult()},n))},ae=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,u)):this.options.refetchInterval)??!1},oe=function(e){y(this,l,ce).call(this),o(this,L,e),!($||F(this.options.enabled,i(this,u))===!1||!ve(i(this,L))||i(this,L)===0)&&o(this,U,setInterval(()=>{(this.options.refetchIntervalInBackground||_e.isFocused())&&y(this,l,J).call(this)},i(this,L)))},ue=function(){y(this,l,re).call(this),y(this,l,oe).call(this,y(this,l,ae).call(this))},he=function(){i(this,P)&&(clearTimeout(i(this,P)),o(this,P,void 0))},ce=function(){i(this,U)&&(clearInterval(i(this,U)),o(this,U,void 0))},le=function(){const e=i(this,O).getQueryCache().build(i(this,O),this.options);if(e===i(this,u))return;const s=i(this,u);o(this,u,e),o(this,G,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},Pe=function(e){Te.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(i(this,R))}),i(this,O).getQueryCache().notify({query:i(this,u),type:"observerResultsUpdated"})})},Le);function Ve(t,e){return F(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Se(t,e){return Ve(t,e)||t.state.data!==void 0&&fe(t,e,e.refetchOnMount)}function fe(t,e,s){if(F(e.enabled,t)!==!1){const n=typeof s=="function"?s(t):s;return n==="always"||n!==!1&&pe(t,e)}return!1}function Ee(t,e,s,n){return(t!==e||F(n.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&pe(t,s)}function pe(t,e){return F(e.enabled,t)!==!1&&t.isStaleByTime(Z(e.staleTime,t))}function We(t,e){return!ie(t.getCurrentResult(),e)}var Ke=w.createContext(void 0),Je=t=>{const e=w.useContext(Ke);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ue=w.createContext(!1),$e=()=>w.useContext(Ue);Ue.Provider;function Ge(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Xe=w.createContext(Ge()),Ye=()=>w.useContext(Xe);function Ze(t,e){return typeof t=="function"?t(...e):!!t}function Fe(){}var et=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},tt=t=>{w.useEffect(()=>{t.clearReset()},[t])},st=({result:t,errorResetBoundary:e,throwOnError:s,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&Ze(s,[t.error,n]),it=t=>{const e=t.staleTime;t.suspense&&(t.staleTime=typeof e=="function"?(...s)=>Math.max(e(...s),1e3):Math.max(e??1e3,1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},nt=(t,e)=>t.isLoading&&t.isFetching&&!e,rt=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,xe=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function at(t,e,s){var d,q,m,V,W;const n=Je(),r=$e(),c=Ye(),h=n.defaultQueryOptions(t);(q=(d=n.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||q.call(d,h),h._optimisticResults=r?"isRestoring":"optimistic",it(h),et(h,c),tt(c);const a=!n.getQueryCache().get(h.queryHash),[f]=w.useState(()=>new e(n,h)),g=f.getOptimisticResult(h),b=!r&&t.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(C=>{const K=b?f.subscribe(Te.batchCalls(C)):Fe;return f.updateResult(),K},[f,b]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),w.useEffect(()=>{f.setOptions(h,{listeners:!1})},[h,f]),rt(h,g))throw xe(h,f,c);if(st({result:g,errorResetBoundary:c,throwOnError:h.throwOnError,query:n.getQueryCache().get(h.queryHash)}))throw g.error;if((V=(m=n.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||V.call(m,h,g),h.experimental_prefetchInRender&&!$&&nt(g,r)){const C=a?xe(h,f,c):(W=n.getQueryCache().get(h.queryHash))==null?void 0:W.promise;C==null||C.catch(Fe).finally(()=>{f.updateResult()})}return h.notifyOnChangeProps?g:f.trackResult(g)}function ft(t,e){return at(t,qe)}export{de as S,Je as a,Fe as b,Ze as c,lt as h,Te as n,ie as s,ft as u};
