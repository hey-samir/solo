{"version":3,"file":"Standings-D3OMAkbh.js","sources":["../../src/pages/Standings.tsx"],"sourcesContent":["import { FC, useState } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport type { AxiosResponse } from 'axios'\nimport client from '../api/client'\nimport LoadingSpinner from '../components/LoadingSpinner'\n\ninterface LeaderboardEntry {\n  username: string\n  totalSends: number\n  avgGrade: string\n  totalPoints: number\n}\n\ninterface CacheInfo {\n  isFromCache: boolean\n  timestamp: string | null\n}\n\nconst Standings: FC = () => {\n  const [cacheInfo, setCacheInfo] = useState<CacheInfo>({\n    isFromCache: false,\n    timestamp: null\n  })\n\n  const { data: leaderboard, isLoading } = useQuery<LeaderboardEntry[]>({\n    queryKey: ['leaderboard'],\n    queryFn: async () => {\n      const response: AxiosResponse = await client.get('/leaderboard')\n      // Check response headers for cache information\n      const timestamp = response.headers?.['x-cache-timestamp'] as string || null\n      const isFromCache = response.headers?.['x-data-source'] === 'cache'\n      setCacheInfo({ isFromCache, timestamp })\n      return response.data\n    }\n  })\n\n  if (isLoading) {\n    return <LoadingSpinner />\n  }\n\n  return (\n    <div className=\"container-fluid px-3\">\n      <div className=\"card\">\n        <div className=\"card-body p-0\">\n          {/* Cache indicator */}\n          {cacheInfo.isFromCache && (\n            <div className=\"alert alert-info m-2\">\n              <i className=\"material-icons align-middle\">access_time</i>\n              <span>Viewing cached standings</span>\n              {cacheInfo.timestamp && (\n                <span className=\"ms-2 text-muted\">\n                  Last updated: {new Date(cacheInfo.timestamp).toLocaleString()}\n                </span>\n              )}\n            </div>\n          )}\n\n          <div className=\"table-responsive\">\n            <table className=\"table table-hover mb-0\">\n              <thead>\n                <tr>\n                  <th className=\"text-center\">#</th>\n                  <th>Username</th>\n                  <th className=\"text-center\">Sends</th>\n                  <th className=\"text-center\">Grade</th>\n                  <th className=\"text-center\">Pts</th>\n                </tr>\n              </thead>\n              <tbody>\n                {leaderboard?.map((entry, index) => (\n                  <tr key={entry.username}>\n                    <td className=\"text-center\">\n                      {index + 1 <= 3 ? (\n                        <span className=\"material-symbols-outlined\">\n                          counter_{index + 1}\n                        </span>\n                      ) : (\n                        index + 1\n                      )}\n                    </td>\n                    <td>{entry.username}</td>\n                    <td className=\"text-center\">{entry.totalSends}</td>\n                    <td className=\"text-center\">{entry.avgGrade}</td>\n                    <td className=\"text-center\">{entry.totalPoints}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Standings"],"names":["useState","jsx","jsxs"],"mappings":";;;AAkBA,MAAM,YAAgB,MAAM;AAC1B,QAAM,CAAC,WAAW,YAAY,IAAIA,sBAAoB;AAAA,IACpD,aAAa;AAAA,IACb,WAAW;AAAA,EAAA,CACZ;AAED,QAAM,EAAE,MAAM,aAAa,UAAA,IAAc,SAA6B;AAAA,IACpE,UAAU,CAAC,aAAa;AAAA,IACxB,SAAS,YAAY;;AACnB,YAAM,WAA0B,MAAM,OAAO,IAAI,cAAc;AAE/D,YAAM,cAAY,cAAS,YAAT,mBAAmB,yBAAkC;AACvE,YAAM,gBAAc,cAAS,YAAT,mBAAmB,sBAAqB;AAC/C,mBAAA,EAAE,aAAa,WAAW;AACvC,aAAO,SAAS;AAAA,IAAA;AAAA,EAClB,CACD;AAED,MAAI,WAAW;AACb,iDAAQ,gBAAe,EAAA;AAAA,EAAA;AAIvB,SAAAC,kCAAAA,IAAC,OAAI,EAAA,WAAU,wBACb,UAAAA,kCAAAA,IAAC,OAAI,EAAA,WAAU,QACb,UAAAC,kCAAA,KAAC,OAAI,EAAA,WAAU,iBAEZ,UAAA;AAAA,IAAA,UAAU,eACTA,uCAAC,OAAI,EAAA,WAAU,wBACb,UAAA;AAAA,MAACD,kCAAA,IAAA,KAAA,EAAE,WAAU,+BAA8B,UAAW,eAAA;AAAA,MACtDA,kCAAAA,IAAC,UAAK,UAAwB,2BAAA,CAAA;AAAA,MAC7B,UAAU,aACRC,uCAAA,QAAA,EAAK,WAAU,mBAAkB,UAAA;AAAA,QAAA;AAAA,QACjB,IAAI,KAAK,UAAU,SAAS,EAAE,eAAe;AAAA,MAAA,EAC9D,CAAA;AAAA,IAAA,GAEJ;AAAA,0CAGD,OAAI,EAAA,WAAU,oBACb,UAACA,kCAAA,KAAA,SAAA,EAAM,WAAU,0BACf,UAAA;AAAA,MAACD,kCAAA,IAAA,SAAA,EACC,iDAAC,MACC,EAAA,UAAA;AAAA,QAACA,kCAAA,IAAA,MAAA,EAAG,WAAU,eAAc,UAAC,KAAA;AAAA,QAC7BA,kCAAAA,IAAC,QAAG,UAAQ,WAAA,CAAA;AAAA,QACXA,kCAAA,IAAA,MAAA,EAAG,WAAU,eAAc,UAAK,SAAA;AAAA,QAChCA,kCAAA,IAAA,MAAA,EAAG,WAAU,eAAc,UAAK,SAAA;AAAA,QAChCA,kCAAA,IAAA,MAAA,EAAG,WAAU,eAAc,UAAG,MAAA,CAAA;AAAA,MAAA,EAAA,CACjC,EACF,CAAA;AAAA,MACAA,kCAAAA,IAAC,WACE,UAAa,2CAAA,IAAI,CAAC,OAAO,iDACvB,MACC,EAAA,UAAA;AAAA,QAACA,kCAAAA,IAAA,MAAA,EAAG,WAAU,eACX,UAAA,QAAQ,KAAK,IACZC,kCAAA,KAAC,QAAK,EAAA,WAAU,6BAA4B,UAAA;AAAA,UAAA;AAAA,UACjC,QAAQ;AAAA,QAAA,GACnB,IAEA,QAAQ,GAEZ;AAAA,QACAD,kCAAAA,IAAC,MAAI,EAAA,UAAA,MAAM,SAAS,CAAA;AAAA,QACnBA,kCAAA,IAAA,MAAA,EAAG,WAAU,eAAe,gBAAM,YAAW;AAAA,QAC7CA,kCAAA,IAAA,MAAA,EAAG,WAAU,eAAe,gBAAM,UAAS;AAAA,QAC3CA,kCAAA,IAAA,MAAA,EAAG,WAAU,eAAe,gBAAM,YAAY,CAAA;AAAA,MAAA,KAbxC,MAAM,QAcf,GAEJ,CAAA;AAAA,IAAA,EAAA,CACF,EACF,CAAA;AAAA,EAAA,EACF,CAAA,EACF,CAAA,GACF;AAEJ;"}