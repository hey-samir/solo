import{u as e,b as a,j as s}from"./vendor-utils-Dq_s5RPr.js";import{r as t}from"./vendor-react-Cv8fuk8E.js";import{c as r}from"./index-lBeFWqNa.js";const c=["Bug Report","Feature Request","User Experience","Performance Issue","Other"],l=()=>{const[l,i]=t.useState("new"),[n,d]=t.useState({title:"",description:"",category:""}),{data:o,refetch:m}=e({queryKey:["feedback",l],queryFn:async()=>(await r.get(`/api/feedback?sort=${l}`)).data}),u=a({mutationFn:async e=>await r.post("/api/feedback",e,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:()=>{d({title:"",description:"",category:""}),m()}});return s.jsxs("div",{className:"row justify-content-center",children:[s.jsx("div",{className:"col-md-4 mb-4",children:s.jsx("div",{className:"card bg-dark",children:s.jsx("div",{className:"card-body",children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a=new FormData;a.append("title",n.title),a.append("description",n.description),a.append("category",n.category),n.screenshot&&a.append("screenshot",n.screenshot),u.mutate(a)},encType:"multipart/form-data",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"form-label required-field",children:"Title"}),s.jsx("input",{type:"text",className:"form-control",placeholder:"Short, descriptive title",required:!0,value:n.title,onChange:e=>d((a=>({...a,title:e.target.value})))})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"form-label required-field",children:"Description"}),s.jsx("textarea",{className:"form-control",placeholder:"Detailed description of your feedback",required:!0,value:n.description,onChange:e=>d((a=>({...a,description:e.target.value})))})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"form-label required-field",children:"Category"}),s.jsxs("select",{className:"form-select",required:!0,value:n.category,onChange:e=>d((a=>({...a,category:e.target.value}))),children:[s.jsx("option",{value:"",children:"Select a category"}),c.map((e=>s.jsx("option",{value:e,children:e},e)))]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"form-label",children:"Screenshot"}),s.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:e=>{var a;const s=null==(a=e.target.files)?void 0:a[0];s&&d((e=>({...e,screenshot:s})))}})]}),s.jsx("button",{type:"submit",className:"btn bg-solo-purple text-white w-100",disabled:u.isPending,children:u.isPending?"Submitting...":"Submit"})]})})})}),s.jsx("div",{className:"col-md-4",children:s.jsxs("div",{className:"card bg-dark",children:[s.jsx("div",{className:"card-header",children:s.jsx("h4",{className:"card-title mb-0",children:"Community Feedback"})}),s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"btn-group mb-3 w-100",children:[s.jsx("button",{className:"btn btn-outline-secondary "+("new"===l?"active":""),onClick:()=>i("new"),children:"Latest"}),s.jsx("button",{className:"btn btn-outline-secondary "+("top"===l?"active":""),onClick:()=>i("top"),children:"Top"})]}),null==o?void 0:o.map((e=>s.jsxs("div",{className:"feedback-item mb-3",children:[s.jsx("h6",{children:e.title}),s.jsx("p",{className:"mb-1",children:e.description}),s.jsxs("small",{className:"text-muted",children:["By @",e.user.username," on ",new Date(e.created_at).toLocaleDateString()]})]},e.id)))]})]})})]})};export{l as default};
