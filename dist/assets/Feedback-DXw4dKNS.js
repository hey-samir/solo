import{r as d,j as e,c as m}from"./main-Bjzdz-Pm.js";import{u as x}from"./useQuery-Byq_2nN4.js";import{u as j}from"./useMutation-D25drBrl.js";const f=["Bug Report","Feature Request","User Experience","Performance Issue","Other"],y=()=>{const[c,l]=d.useState("new"),[a,r]=d.useState({title:"",description:"",category:""}),{data:n,refetch:u}=x({queryKey:["feedback",c],queryFn:async()=>(await m.get(`/api/feedback?sort=${c}`)).data}),i=j({mutationFn:async s=>await m.post("/api/feedback",s,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:()=>{r({title:"",description:"",category:""}),u()}}),p=async s=>{s.preventDefault();const t=new FormData;t.append("title",a.title),t.append("description",a.description),t.append("category",a.category),a.screenshot&&t.append("screenshot",a.screenshot),i.mutate(t)},h=s=>{var o;const t=(o=s.target.files)==null?void 0:o[0];t&&r(b=>({...b,screenshot:t}))};return e.jsxs("div",{className:"row justify-content-center",children:[e.jsx("div",{className:"col-md-4 mb-4",children:e.jsx("div",{className:"card bg-dark",children:e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:p,encType:"multipart/form-data",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label required-field",children:"Title"}),e.jsx("input",{type:"text",className:"form-control",placeholder:"Short, descriptive title",required:!0,value:a.title,onChange:s=>r(t=>({...t,title:s.target.value}))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label required-field",children:"Description"}),e.jsx("textarea",{className:"form-control",placeholder:"Detailed description of your feedback",required:!0,value:a.description,onChange:s=>r(t=>({...t,description:s.target.value}))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label required-field",children:"Category"}),e.jsxs("select",{className:"form-select",required:!0,value:a.category,onChange:s=>r(t=>({...t,category:s.target.value})),children:[e.jsx("option",{value:"",children:"Select a category"}),f.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Screenshot"}),e.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:h})]}),e.jsx("button",{type:"submit",className:"btn bg-solo-purple text-white w-100",disabled:i.isPending,children:i.isPending?"Submitting...":"Submit"})]})})})}),e.jsx("div",{className:"col-md-4",children:e.jsxs("div",{className:"card bg-dark",children:[e.jsx("div",{className:"card-header",children:e.jsx("h4",{className:"card-title mb-0",children:"Community Feedback"})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"btn-group mb-3 w-100",children:[e.jsx("button",{className:`btn btn-outline-secondary ${c==="new"?"active":""}`,onClick:()=>l("new"),children:"Latest"}),e.jsx("button",{className:`btn btn-outline-secondary ${c==="top"?"active":""}`,onClick:()=>l("top"),children:"Top"})]}),n==null?void 0:n.map(s=>e.jsxs("div",{className:"feedback-item mb-3",children:[e.jsx("h6",{children:s.title}),e.jsx("p",{className:"mb-1",children:s.description}),e.jsxs("small",{className:"text-muted",children:["By @",s.user.username," on ",new Date(s.created_at).toLocaleDateString()]})]},s.id))]})]})})]})};export{y as default};
