{"version":3,"file":"Standings-DtkU46Lo.js","sources":["../../src/pages/Standings.tsx"],"sourcesContent":["import { FC, useState } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport type { AxiosResponse } from 'axios'\nimport client from '../api/client'\nimport LoadingSpinner from '../components/LoadingSpinner'\n\ninterface LeaderboardEntry {\n  username: string\n  totalSends: number\n  avgGrade: string\n  totalPoints: number\n}\n\ninterface CacheInfo {\n  isFromCache: boolean\n  timestamp: string | null\n}\n\nconst Standings: FC = () => {\n  const [cacheInfo, setCacheInfo] = useState<CacheInfo>({\n    isFromCache: false,\n    timestamp: null\n  })\n\n  const { data: leaderboard, isLoading } = useQuery<LeaderboardEntry[]>({\n    queryKey: ['leaderboard'],\n    queryFn: async () => {\n      const response: AxiosResponse = await client.get('/leaderboard')\n      // Check response headers for cache information\n      const timestamp = response.headers?.['x-cache-timestamp'] as string || null\n      const isFromCache = response.headers?.['x-data-source'] === 'cache'\n      setCacheInfo({ isFromCache, timestamp })\n      return response.data\n    }\n  })\n\n  if (isLoading) {\n    return <LoadingSpinner />\n  }\n\n  return (\n    <div className=\"container-fluid px-3\">\n      <div className=\"card\">\n        <div className=\"card-body p-0\">\n          {/* Cache indicator */}\n          {cacheInfo.isFromCache && (\n            <div className=\"alert alert-info m-2\">\n              <i className=\"material-icons align-middle\">access_time</i>\n              <span>Viewing cached standings</span>\n              {cacheInfo.timestamp && (\n                <span className=\"ms-2 text-muted\">\n                  Last updated: {new Date(cacheInfo.timestamp).toLocaleString()}\n                </span>\n              )}\n            </div>\n          )}\n\n          <div className=\"table-responsive\">\n            <table className=\"table table-hover mb-0\">\n              <thead>\n                <tr>\n                  <th className=\"text-center\">#</th>\n                  <th>Username</th>\n                  <th className=\"text-center\">Sends</th>\n                  <th className=\"text-center\">Grade</th>\n                  <th className=\"text-center\">Pts</th>\n                </tr>\n              </thead>\n              <tbody>\n                {leaderboard?.map((entry, index) => (\n                  <tr key={entry.username}>\n                    <td className=\"text-center\">\n                      {index + 1 <= 3 ? (\n                        <span className=\"material-symbols-outlined\">\n                          counter_{index + 1}\n                        </span>\n                      ) : (\n                        index + 1\n                      )}\n                    </td>\n                    <td>{entry.username}</td>\n                    <td className=\"text-center\">{entry.totalSends}</td>\n                    <td className=\"text-center\">{entry.avgGrade}</td>\n                    <td className=\"text-center\">{entry.totalPoints}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Standings"],"names":["Standings","cacheInfo","setCacheInfo","useState","isFromCache","timestamp","data","leaderboard","isLoading","useQuery","queryKey","queryFn","async","response","client","get","_a","headers","_b","LoadingSpinner","jsx","className","children","jsxRuntimeExports","jsxs","Date","toLocaleString","map","entry","index","username","totalSends","avgGrade","totalPoints"],"mappings":"oJAkBA,MAAMA,EAAgB,KACpB,MAAOC,EAAWC,GAAgBC,WAAoB,CACpDC,aAAa,EACbC,UAAW,QAGLC,KAAMC,EAAaC,UAAAA,GAAcC,EAA6B,CACpEC,SAAU,CAAC,eACXC,QAASC,kBACP,MAAMC,QAAgCC,EAAOC,IAAI,gBAE3CV,GAAY,OAAAW,EAAAH,EAASI,cAAT,EAAAD,EAAmB,uBAAkC,KACjEZ,EAAsD,WAAxC,OAAAc,EAAAL,EAASI,cAAT,EAAAC,EAAmB,kBAEvC,OADahB,EAAA,CAAEE,cAAaC,cACrBQ,EAASP,IAAA,IAIpB,OAAIE,QACMW,EAAe,IAIvBC,EAAAA,IAAC,MAAI,CAAAC,UAAU,uBACbC,WAAAF,IAAC,MAAI,CAAAC,UAAU,OACbC,SAAAC,EAAAC,KAAC,MAAI,CAAAH,UAAU,gBAEZC,SAAA,CAAArB,EAAUG,oBACR,MAAI,CAAAiB,UAAU,uBACbC,SAAA,CAACF,EAAAA,IAAA,IAAA,CAAEC,UAAU,8BAA8BC,SAAW,kBACtDF,IAAC,QAAKE,SAAwB,6BAC7BrB,EAAUI,kBACR,OAAA,CAAKgB,UAAU,kBAAkBC,SAAA,CAAA,iBACjB,IAAIG,KAAKxB,EAAUI,WAAWqB,6BAMpD,MAAI,CAAAL,UAAU,mBACbC,SAACE,EAAAA,KAAA,QAAA,CAAMH,UAAU,yBACfC,SAAA,CAACF,EAAAA,IAAA,QAAA,CACCE,gBAAC,KACC,CAAAA,SAAA,CAACF,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcC,SAAC,QAC7BF,IAAC,MAAGE,SAAQ,aACXF,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcC,SAAK,UAChCF,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcC,SAAK,UAChCF,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAcC,SAAG,aAGnCF,EAAAA,IAAC,SACEE,SAAa,MAAAf,OAAA,EAAAA,EAAAoB,KAAI,CAACC,EAAOC,WACvB,KACC,CAAAP,SAAA,GAACF,IAAA,KAAA,CAAGC,UAAU,cACXC,SAAAO,EAAQ,GAAK,IACZL,KAAC,OAAK,CAAAH,UAAU,4BAA4BC,SAAA,CAAA,WACjCO,EAAQ,KAGnBA,EAAQ,MAGZT,IAAC,KAAI,CAAAE,SAAAM,EAAME,WACVV,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAeC,WAAMS,aAClCX,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAeC,WAAMU,WAClCZ,EAAAA,IAAA,KAAA,CAAGC,UAAU,cAAeC,WAAMW,gBAb5BL,EAAME,yBAqB7B"}