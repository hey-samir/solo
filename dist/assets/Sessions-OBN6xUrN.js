import{u as e,j as s}from"./vendor-utils-Dq_s5RPr.js";import{r}from"./vendor-react-Cv8fuk8E.js";import{L as t,c as a}from"./index-BboWMfKQ.js";const c=()=>{const[c,l]=r.useState({key:"color",direction:"asc",date:null}),{data:n,isLoading:o}=e({queryKey:["climbs"],queryFn:async()=>(await a.get("/climbs")).data});if(o)return s.jsx(t,{});const i=(null==n?void 0:n.reduce(((e,s)=>{const r=new Date(s.createdAt).toLocaleDateString();return e[r]||(e[r]=[]),e[r].push(s),e}),{}))||{},d=(e,s)=>{l((r=>({key:e,direction:r.key===e&&r.date===s&&"asc"===r.direction?"desc":"asc",date:s})))},x=(e,r)=>c.key!==e||c.date!==r?null:s.jsx("span",{className:"ml-1",children:"asc"===c.direction?"↑":"↓"});return s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Your Climbing Sessions"}),Object.entries(i).map((([e,r])=>{return s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:e}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-50",children:[s.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("color",e),children:["Color ",x("color",e)]}),s.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("grade",e),children:["Grade ",x("grade",e)]}),s.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("status",e),children:["Status ",x("status",e)]}),s.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("tries",e),children:["# Tries ",x("tries",e)]}),s.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("rating",e),children:["Stars ",x("rating",e)]}),s.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>d("points",e),children:["Points ",x("points",e)]})]})}),s.jsx("tbody",{children:(t=r,[...t].sort(((e,s)=>{let r=0;switch(c.key){case"color":r=e.route.color.localeCompare(s.route.color);break;case"grade":r=e.route.grade.localeCompare(s.route.grade);break;case"status":r=Number(s.status)-Number(e.status);break;case"tries":r=e.tries-s.tries;break;case"rating":r=e.rating-s.rating;break;case"points":r=e.points-s.points;break;default:return 0}return"asc"===c.direction?r:-r}))).map((e=>{return s.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:(r=e.route.color,{White:"#FFFFFF",Pink:"#FF69B4",Blue:"#0000FF",Black:"#000000",Orange:"#FFA500",Purple:"#800080",Green:"#008000",Red:"#FF0000",Yellow:"#FFFF00",Teal:"#008080"}[r]||"#CCCCCC"),border:"White"===e.route.color?"1px solid #ccc":"none"}}),e.route.color]})}),s.jsx("td",{className:"px-4 py-2",children:e.route.grade}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("span",{className:"font-medium "+(e.status?"text-green-600":"text-red-600"),children:e.status?"Send":"Attempt"})}),s.jsx("td",{className:"px-4 py-2",children:e.tries}),s.jsxs("td",{className:"px-4 py-2",children:[e.rating,"/5"]}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("span",{className:"text-purple-600 font-medium",children:[e.points," pts"]})})]},e.id);var r}))})]})})]},e);var t})),0===Object.keys(i).length&&s.jsxs("div",{className:"text-center my-8",children:[s.jsx("h4",{className:"text-xl text-gray-600 mb-4",children:"Enter your first climb to see Sessions"}),s.jsx("a",{href:"/sends",className:"inline-block bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition",children:"Back to Sends"})]})]})};export{c as default};
