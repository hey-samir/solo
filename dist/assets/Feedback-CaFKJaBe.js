import{r as e,e as a,f as s,j as t}from"./vendor-react-CkJ17WLR.js";import{c as r}from"./index-CVPKLKNk.js";import"./vendor-KpuKSdEb.js";import"./vendor-chart-COoc_JxG.js";import"./vendor-ui-CK7Iyed6.js";const c=["Bug Report","Feature Request","User Experience","Performance Issue","Other"],i=()=>{const[i,l]=e.useState("new"),[n,d]=e.useState({title:"",description:"",category:""}),{data:o,refetch:m}=a({queryKey:["feedback",i],queryFn:async()=>(await r.get(`/api/feedback?sort=${i}`)).data}),p=s({mutationFn:async e=>await r.post("/api/feedback",e,{headers:{"Content-Type":"multipart/form-data"}}),onSuccess:()=>{d({title:"",description:"",category:""}),m()}});return t.jsxs("div",{className:"row justify-content-center",children:[t.jsx("div",{className:"col-md-4 mb-4",children:t.jsx("div",{className:"card bg-dark",children:t.jsx("div",{className:"card-body",children:t.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a=new FormData;a.append("title",n.title),a.append("description",n.description),a.append("category",n.category),n.screenshot&&a.append("screenshot",n.screenshot),p.mutate(a)},encType:"multipart/form-data",children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"form-label required-field",children:"Title"}),t.jsx("input",{type:"text",className:"form-control",placeholder:"Short, descriptive title",required:!0,value:n.title,onChange:e=>d((a=>({...a,title:e.target.value})))})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"form-label required-field",children:"Description"}),t.jsx("textarea",{className:"form-control",placeholder:"Detailed description of your feedback",required:!0,value:n.description,onChange:e=>d((a=>({...a,description:e.target.value})))})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"form-label required-field",children:"Category"}),t.jsxs("select",{className:"form-select",required:!0,value:n.category,onChange:e=>d((a=>({...a,category:e.target.value}))),children:[t.jsx("option",{value:"",children:"Select a category"}),c.map((e=>t.jsx("option",{value:e,children:e},e)))]})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"form-label",children:"Screenshot"}),t.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:e=>{var a;const s=null==(a=e.target.files)?void 0:a[0];s&&d((e=>({...e,screenshot:s})))}})]}),t.jsx("button",{type:"submit",className:"btn bg-solo-purple text-white w-100",disabled:p.isPending,children:p.isPending?"Submitting...":"Submit"})]})})})}),t.jsx("div",{className:"col-md-4",children:t.jsxs("div",{className:"card bg-dark",children:[t.jsx("div",{className:"card-header",children:t.jsx("h4",{className:"card-title mb-0",children:"Community Feedback"})}),t.jsxs("div",{className:"card-body",children:[t.jsxs("div",{className:"btn-group mb-3 w-100",children:[t.jsx("button",{className:"btn btn-outline-secondary "+("new"===i?"active":""),onClick:()=>l("new"),children:"Latest"}),t.jsx("button",{className:"btn btn-outline-secondary "+("top"===i?"active":""),onClick:()=>l("top"),children:"Top"})]}),null==o?void 0:o.map((e=>t.jsxs("div",{className:"feedback-item mb-3",children:[t.jsx("h6",{children:e.title}),t.jsx("p",{className:"mb-1",children:e.description}),t.jsxs("small",{className:"text-muted",children:["By @",e.user.username," on ",new Date(e.created_at).toLocaleDateString()]})]},e.id)))]})]})})]})};export{i as default};
