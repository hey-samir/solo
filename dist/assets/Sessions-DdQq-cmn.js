import{j as e,L as m,c as h}from"./main-CXPaLQ_r.js";import{r as g}from"./vendor-react-Bxu8IAQH.js";import{u as j}from"./useQuery-BXaTn2AS.js";const C=()=>{const[c,d]=g.useState({key:"color",direction:"asc",date:null}),{data:l,isLoading:p}=j({queryKey:["climbs"],queryFn:async()=>(await h.get("/climbs")).data});if(p)return e.jsx(m,{});const x=s=>({White:"#FFFFFF",Pink:"#FF69B4",Blue:"#0000FF",Black:"#000000",Orange:"#FFA500",Purple:"#800080",Green:"#008000",Red:"#FF0000",Yellow:"#FFFF00",Teal:"#008080"})[s]||"#CCCCCC",i=(l==null?void 0:l.reduce((s,t)=>{const r=new Date(t.createdAt).toLocaleDateString();return s[r]||(s[r]=[]),s[r].push(t),s},{}))||{},u=s=>[...s].sort((t,r)=>{let o=0;switch(c.key){case"color":o=t.route.color.localeCompare(r.route.color);break;case"grade":o=t.route.grade.localeCompare(r.route.grade);break;case"status":o=Number(r.status)-Number(t.status);break;case"tries":o=t.tries-r.tries;break;case"rating":o=t.rating-r.rating;break;case"points":o=t.points-r.points;break;default:return 0}return c.direction==="asc"?o:-o}),n=(s,t)=>{d(r=>({key:s,direction:r.key===s&&r.date===t&&r.direction==="asc"?"desc":"asc",date:t}))},a=(s,t)=>c.key!==s||c.date!==t?null:e.jsx("span",{className:"ml-1",children:c.direction==="asc"?"↑":"↓"});return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Your Climbing Sessions"}),Object.entries(i).map(([s,t])=>e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:s}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>n("color",s),children:["Color ",a("color",s)]}),e.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>n("grade",s),children:["Grade ",a("grade",s)]}),e.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>n("status",s),children:["Status ",a("status",s)]}),e.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>n("tries",s),children:["# Tries ",a("tries",s)]}),e.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>n("rating",s),children:["Stars ",a("rating",s)]}),e.jsxs("th",{className:"px-4 py-2 cursor-pointer",onClick:()=>n("points",s),children:["Points ",a("points",s)]})]})}),e.jsx("tbody",{children:u(t).map(r=>e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:x(r.route.color),border:r.route.color==="White"?"1px solid #ccc":"none"}}),r.route.color]})}),e.jsx("td",{className:"px-4 py-2",children:r.route.grade}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`font-medium ${r.status?"text-green-600":"text-red-600"}`,children:r.status?"Send":"Attempt"})}),e.jsx("td",{className:"px-4 py-2",children:r.tries}),e.jsxs("td",{className:"px-4 py-2",children:[r.rating,"/5"]}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("span",{className:"text-purple-600 font-medium",children:[r.points," pts"]})})]},r.id))})]})})]},s)),Object.keys(i).length===0&&e.jsxs("div",{className:"text-center my-8",children:[e.jsx("h4",{className:"text-xl text-gray-600 mb-4",children:"Enter your first climb to see Sessions"}),e.jsx("a",{href:"/sends",className:"inline-block bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition",children:"Back to Sends"})]})]})};export{C as default};
