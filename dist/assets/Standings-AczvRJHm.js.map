{"version":3,"file":"Standings-AczvRJHm.js","sources":["../../src/pages/Standings.tsx"],"sourcesContent":["import { FC, useState } from 'react'\nimport { useQuery } from '@tanstack/react-query'\nimport type { AxiosResponse } from 'axios'\nimport client from '../api/client'\nimport LoadingSpinner from '../components/LoadingSpinner'\n\ninterface LeaderboardEntry {\n  username: string\n  totalSends: number\n  avgGrade: string\n  totalPoints: number\n}\n\ninterface CacheInfo {\n  isFromCache: boolean\n  timestamp: string | null\n}\n\nconst Standings: FC = () => {\n  const [cacheInfo, setCacheInfo] = useState<CacheInfo>({\n    isFromCache: false,\n    timestamp: null\n  })\n\n  const { data: leaderboard, isLoading } = useQuery<LeaderboardEntry[]>({\n    queryKey: ['leaderboard'],\n    queryFn: async () => {\n      const response: AxiosResponse = await client.get('/leaderboard')\n      // Check response headers for cache information\n      const timestamp = response.headers?.['x-cache-timestamp'] as string || null\n      const isFromCache = response.headers?.['x-data-source'] === 'cache'\n      setCacheInfo({ isFromCache, timestamp })\n      return response.data\n    }\n  })\n\n  if (isLoading) {\n    return <LoadingSpinner />\n  }\n\n  return (\n    <div className=\"container-fluid px-3\">\n      <div className=\"card\">\n        <div className=\"card-body p-0\">\n          {/* Cache indicator */}\n          {cacheInfo.isFromCache && (\n            <div className=\"alert alert-info m-2\">\n              <i className=\"material-icons align-middle\">access_time</i>\n              <span>Viewing cached standings</span>\n              {cacheInfo.timestamp && (\n                <span className=\"ms-2 text-muted\">\n                  Last updated: {new Date(cacheInfo.timestamp).toLocaleString()}\n                </span>\n              )}\n            </div>\n          )}\n\n          <div className=\"table-responsive\">\n            <table className=\"table table-hover mb-0\">\n              <thead>\n                <tr>\n                  <th className=\"text-center\">#</th>\n                  <th>Username</th>\n                  <th className=\"text-center\">Sends</th>\n                  <th className=\"text-center\">Grade</th>\n                  <th className=\"text-center\">Pts</th>\n                </tr>\n              </thead>\n              <tbody>\n                {leaderboard?.map((entry, index) => (\n                  <tr key={entry.username}>\n                    <td className=\"text-center\">\n                      {index + 1 <= 3 ? (\n                        <span className=\"material-symbols-outlined\">\n                          counter_{index + 1}\n                        </span>\n                      ) : (\n                        index + 1\n                      )}\n                    </td>\n                    <td>{entry.username}</td>\n                    <td className=\"text-center\">{entry.totalSends}</td>\n                    <td className=\"text-center\">{entry.avgGrade}</td>\n                    <td className=\"text-center\">{entry.totalPoints}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Standings"],"names":["Standings","cacheInfo","setCacheInfo","useState","leaderboard","isLoading","useQuery","response","client","timestamp","_a","isFromCache","_b","LoadingSpinner","jsx","jsxs","entry","index"],"mappings":"oJAkBA,MAAMA,EAAgB,IAAM,CAC1B,KAAM,CAACC,EAAWC,CAAY,EAAIC,WAAoB,CACpD,YAAa,GACb,UAAW,IAAA,CACZ,EAEK,CAAE,KAAMC,EAAa,UAAAC,CAAA,EAAcC,EAA6B,CACpE,SAAU,CAAC,aAAa,EACxB,QAAS,SAAY,SACnB,MAAMC,EAA0B,MAAMC,EAAO,IAAI,cAAc,EAEzDC,IAAYC,EAAAH,EAAS,UAAT,YAAAG,EAAmB,uBAAkC,KACjEC,IAAcC,EAAAL,EAAS,UAAT,YAAAK,EAAmB,oBAAqB,QAC/C,OAAAV,EAAA,CAAE,YAAAS,EAAa,UAAAF,EAAW,EAChCF,EAAS,IAAA,CAClB,CACD,EAED,OAAIF,QACMQ,EAAe,EAAA,EAIvBC,EAAAA,IAAC,MAAI,CAAA,UAAU,uBACb,SAAAA,EAAAA,IAAC,MAAI,CAAA,UAAU,OACb,SAAAC,EAAA,KAAC,MAAI,CAAA,UAAU,gBAEZ,SAAA,CAAAd,EAAU,aACTc,OAAC,MAAI,CAAA,UAAU,uBACb,SAAA,CAACD,EAAA,IAAA,IAAA,CAAE,UAAU,8BAA8B,SAAW,cAAA,EACtDA,EAAAA,IAAC,QAAK,SAAwB,0BAAA,CAAA,EAC7Bb,EAAU,WACRc,OAAA,OAAA,CAAK,UAAU,kBAAkB,SAAA,CAAA,iBACjB,IAAI,KAAKd,EAAU,SAAS,EAAE,eAAe,CAAA,CAC9D,CAAA,CAAA,EAEJ,QAGD,MAAI,CAAA,UAAU,mBACb,SAACc,EAAA,KAAA,QAAA,CAAM,UAAU,yBACf,SAAA,CAACD,EAAA,IAAA,QAAA,CACC,gBAAC,KACC,CAAA,SAAA,CAACA,EAAA,IAAA,KAAA,CAAG,UAAU,cAAc,SAAC,IAAA,EAC7BA,EAAAA,IAAC,MAAG,SAAQ,UAAA,CAAA,EACXA,EAAA,IAAA,KAAA,CAAG,UAAU,cAAc,SAAK,QAAA,EAChCA,EAAA,IAAA,KAAA,CAAG,UAAU,cAAc,SAAK,QAAA,EAChCA,EAAA,IAAA,KAAA,CAAG,UAAU,cAAc,SAAG,KAAA,CAAA,CAAA,CAAA,CACjC,CACF,CAAA,EACAA,EAAAA,IAAC,SACE,SAAaV,GAAA,YAAAA,EAAA,IAAI,CAACY,EAAOC,WACvB,KACC,CAAA,SAAA,CAACH,EAAAA,IAAA,KAAA,CAAG,UAAU,cACX,SAAAG,EAAQ,GAAK,EACZF,EAAA,KAAC,OAAK,CAAA,UAAU,4BAA4B,SAAA,CAAA,WACjCE,EAAQ,CAAA,EACnB,EAEAA,EAAQ,EAEZ,EACAH,EAAAA,IAAC,KAAI,CAAA,SAAAE,EAAM,QAAS,CAAA,EACnBF,EAAA,IAAA,KAAA,CAAG,UAAU,cAAe,WAAM,WAAW,EAC7CA,EAAA,IAAA,KAAA,CAAG,UAAU,cAAe,WAAM,SAAS,EAC3CA,EAAA,IAAA,KAAA,CAAG,UAAU,cAAe,WAAM,WAAY,CAAA,CAAA,GAbxCE,EAAM,QAcf,EAEJ,CAAA,CAAA,CAAA,CACF,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ"}